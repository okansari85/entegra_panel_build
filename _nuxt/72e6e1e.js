(window.webpackJsonp=window.webpackJsonp||[]).push([[13,9,14],{919:function(t,e,r){var content=r(933);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(15).default)("236cb6a9",content,!0,{sourceMap:!1})},920:function(t,e,r){var content=r(935);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(15).default)("299327e2",content,!0,{sourceMap:!1})},927:function(t,e,r){var content=r(951);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(15).default)("2e1b5ef4",content,!0,{sourceMap:!1})},932:function(t,e,r){"use strict";r(919)},933:function(t,e,r){var o=r(14)((function(i){return i[1]}));o.push([t.i,".progress-bar{background-color:#f0f0f0;border-radius:4px;height:20px;width:100%}.progress{background-color:#007bff;border-radius:4px;height:100%}.progress-label{margin-top:5px}",""]),o.locals={},t.exports=o},934:function(t,e,r){"use strict";r(920)},935:function(t,e,r){var o=r(14)((function(i){return i[1]}));o.push([t.i,".hover-opacity[data-v-048d9661]{opacity:.5;transition:opacity .5s ease}.hover-opacity[data-v-048d9661]:hover{opacity:1}",""]),o.locals={},t.exports=o},942:function(t,e,r){"use strict";r.r(e);var o=r(26),n=(r(65),r(36),{props:{updateStockPrice:{type:Boolean,default:!1}},data:function(){return{progress:null,intervalId:null,batchId:null,totalJobs:null,processedJob:null}},mounted:function(){this.findBatchID()},beforeDestroy:function(){clearInterval(this.intervalId)},methods:{fetchProgress:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$entegraApi.$get("/products-price-update-to-n11-quee").then((function(e){t.batchId=e.id,t.intervalId=setInterval(t.checkProgress,1e3)}));case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error fetching progress:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},checkProgress:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$entegraApi.$get("/batches/"+t.batchId).then((function(e){t.progress=parseInt(e.progress),t.processedJob=e.processedJobs,t.totalJobs=e.totalJobs,0==e.pendingJobs&&(t.progress=null,clearInterval(t.intervalId))}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))()},findBatchID:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$entegraApi.$get("/findBatchIdByName/n11pricestockupdate").then((function(e){e.id&&(t.batchId=e.id,t.intervalId=setInterval(t.checkProgress,1e3))}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))()}}}),l=(r(932),r(5)),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("div",{class:null==t.progress?"pa-3":""},[null!==t.progress?e("div",[e("h5",[t._v(t._s(t.processedJob)+"/"+t._s(t.totalJobs))]),t._v(" "),e("ProgressBar",{staticStyle:{height:".2em"},attrs:{value:t.progress,showValue:!1}})],1):t._e()])}),[],!1,null,null,null);e.default=component.exports},943:function(t,e,r){"use strict";r.r(e);var o={props:{width:{type:String,default:40},grayScaledImage:{type:String,default:""},coloredImage:{type:String,default:""},ismarketProductMatched:{type:Boolean,default:!1}},data:function(){return{imageSrc:this.grayScaledImage}},methods:{changeImage:function(t){this.imageSrc=t&&1!=this.ismarketProductMatched?this.coloredImage:this.grayScaledImage},clickedLogo:function(){this.$emit("handle-logo-click")}}},n=(r(934),r(5)),component=Object(n.a)(o,(function(){var t=this;return(0,t._self._c)("img",{class:t.ismarketProductMatched?"":"hover-opacity",staticStyle:{cursor:"pointer",transition:"opacity 0.5s ease"},attrs:{src:t.ismarketProductMatched?t.coloredImage:t.imageSrc,alt:"Hover Image",width:t.width},on:{mouseover:function(e){return t.changeImage(!0)},mouseout:function(e){return t.changeImage(!1)},click:t.clickedLogo}})}),[],!1,null,"048d9661",null);e.default=component.exports},949:function(t,e,r){"use strict";t.exports=r(955)},950:function(t,e,r){"use strict";r(927)},951:function(t,e,r){var o=r(14)((function(i){return i[1]}));o.push([t.i,".p-datatable table{border-collapse:seperate!important;border-spacing:0 10px;font-size:14px;min-width:100%;table-layout:fixed}::v-deep .p-datatable-wrapper{border-radius:.5rem .5rem .5rem .5rem}::v-deep .p-datatable-table>thead>tr:first-of-type>th:first-of-type{border-radius:.5rem 0 0 0!important}::v-deep .p-datatable-table>thead>tr:first-of-type>th:last-of-type{border-radius:0 .5rem 0 0!important}::v-deep .p-datatable-table>tbody>tr:last-of-type>td:first-of-type{border-radius:0 0 0 .5rem!important}::v-deep .p-datatable-table>tbody>tr:last-of-type>td:last-of-type{border-radius:0 0 .5rem 0!important}.ui-datatable *{border:0!important}:deep(.p-paginator) .p-paginator-current{margin-left:auto}:deep(.p-progressbar){background-color:#d8dadc;height:.5rem}:deep(.p-progressbar) .p-progressbar-value{background-color:#607d8b}:deep(.p-datepicker){min-width:25rem}:deep(.p-datepicker) td{font-weight:400}:deep(.p-datatable.p-datatable-customers) .p-datatable-header{padding:1rem;text-align:left}:deep(.p-datatable.p-datatable-customers) .p-paginator{padding:1rem}:deep(.p-datatable.p-datatable-customers) .p-datatable-thead>tr>th{font-size:12px!important}:deep(.p-datatable.p-datatable-customers) .p-datatable-thead>tr>th{text-align:left}:deep(.p-datatable.p-datatable-customers) .p-datatable-tbody>tr>td{cursor:auto}.product_image{background-color:#fff;border:1px solid #e5e5e5;border-radius:4px;height:50px;margin-right:12px;max-width:50px;min-height:50px;min-width:50px;overflow:hidden;width:50px}.product_container{align-content:flex-end;align-items:center;display:flex;flex-direction:row;justify-content:flex-start;position:relative}",""]),o.locals={},t.exports=o},955:function(t,e,r){"use strict";r.r(e);var o={props:{value:null,severity:null,size:null},computed:{containerClass:function(){return this.$slots.default?"p-overlay-badge":this.badgeClass},badgeClass:function(){return["p-badge p-component",{"p-badge-no-gutter":this.value&&1===String(this.value).length,"p-badge-dot":!this.value,"p-badge-lg":"large"===this.size,"p-badge-xl":"xlarge"===this.size,"p-badge-info":"info"===this.severity,"p-badge-success":"success"===this.severity,"p-badge-warning":"warning"===this.severity,"p-badge-danger":"danger"===this.severity}]}}},n=r(5),component=Object(n.a)(o,(function(){var t=this;return(0,t._self._c)("span",{class:t.badgeClass},[t._v(t._s(t.value))])}),[],!1,null,null,null);e.default=component.exports},968:function(t,e,r){"use strict";r.r(e);var o=r(191),n=r(890),l=r(959),c=r(893),d=r(273),f=r(274),h=r(187),m=r(53),_=(r(34),r(13),r(10),r(12),r(6),r(19),r(11),r(20),r(26)),y=r(2),v=(r(65),r(8),r(164)),k=r(585);r(310),r(317),r(949);function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){Object(y.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var w={props:{items:{type:Array,default:function(){return[]}},headers:{type:Array,default:null},loading:{type:Boolean,default:!1},totalRecords:{type:Number,default:0},rows:{type:Number,default:10}},computed:C({},Object(v.e)({n11_product:function(t){return t.products.n11_product}})),data:function(){return{selectedCustomers:null,selectAll:!1,lazyParams:{},filters:{global:{value:"",matchMode:k.FilterMatchMode.CONTAINS}},displayMaximizable:!1,ModalHeader:"",clickedProduct:[],productCode:"",value:null,loading_single_product_card:!1,try_again:!1,site:"",soapresult:!1,errorMessagge:"",eslestir_btn_disabled:!0}},mounted:function(){this.lazyParams={first:0,rows:this.$refs.dt.rows,sortField:null,sortOrder:null,filters:this.filters},this.$emit("handle-options",this.lazyParams)},methods:C(C({},Object(v.b)({getN11ProductBySellerCode:"products/getN11ProductBySellerCode",matchProduct:"products/matchProduct"})),{},{openMaximizable:function(){this.displayMaximizable=!0},closeMaximizable:function(){this.displayMaximizable=!1},handleUpdateStockPrice:function(){this.$refs.progressBarCompon.fetchProgress()},handleMatch:function(t,e){var r=this,o={n11_product:t,db_product:e};this.matchProduct(o).then((function(t){r.$refs.progressBarCompon.findBatchID()}))},clickedLogo:function(data,t){this.clickedProduct=data,this.site=t,this.handleLogo(null!=data.n11_product?data.n11_product.n11_product.productSellerCode:this.clickedProduct.productCode,t),this.eslestir_btn_disabled=!0},handleLogo:function(data,t){var e=this;return Object(_.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("n11"!=t){r.next=10;break}return e.ModalHeader="N11 Ürün Eşleştir",e.productCode=data,e.displayMaximizable=!0,e.loading_single_product_card=!0,e.try_again=!1,e.soapresult=!1,e.eslestir_btn_disabled=!0,r.next=10,e.getN11ProductBySellerCode(data).then((function(t){e.loading_single_product_card=!1,"success"==!t.result.status||0==t.length?(e.try_again=!0,e.soapresult=!1):"failure"==t.result.status?(e.soapresult=!1,e.try_again=!0,e.errorMessagge="Ürün Bulunamadı"):"success"==t.result.status&&(e.soapresult=!0,e.eslestir_btn_disabled=!1)})).catch((function(t){e.errorMessagge="N11 ' den ürün çekerken bir hata oluştu",e.loading_single_product_card=!1,e.try_again=!0,e.soapresult=!1}));case 10:case"end":return r.stop()}}),r)})))()},formatCurrency:function(t){return t.toLocaleString("tr-TR",{style:"currency",currency:"TRY"})},onPage:function(t){console.log(t),this.lazyParams=t,this.$emit("handle-options",this.lazyParams)},onSort:function(t){this.lazyParams=t,this.$emit("handle-options",this.lazyParams)},onFilter:function(){this.lazyParams.filters=this.filters,this.$emit("handle-options",this.lazyParams)},onSelectAllChange:function(t){t.checked||(this.selectAll=!1,this.selectedCustomers=[])},onRowSelect:function(){this.selectAll=this.selectedCustomers.length===this.totalRecords},onRowUnselect:function(){this.selectAll=!1},clickNewProduct:function(){this.$refs.productFormComp.showModal("new")},clickEditProduct:function(t){console.log(t),this.$refs.productFormComp.showModal("edit",t)},onProductSave:function(){console.log("onsave"),this.$emit("handle-options",this.lazyParams)}})},S=(r(950),r(5)),component=Object(S.a)(w,(function(){var t=this,e=t._self._c;return e("div",[e("ProductForm",{ref:"productFormComp",on:{"on-product-save":t.onProductSave}}),t._v(" "),e(n.a,{staticClass:"mx-auto mb-2",attrs:{eager:"",flat:""}},[e("ProgressBarComp",{ref:"progressBarCompon"})],1),t._v(" "),e(n.a,{staticClass:"mx-auto",attrs:{eager:"",flat:""}},[e("Toolbar",{staticClass:"mb-4",scopedSlots:t._u([{key:"start",fn:function(){return[e(o.a,{staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(e){return t.clickNewProduct()}}},[e(d.a,{attrs:{dark:""}},[t._v("\n            mdi-plus\n          ")])],1),t._v(" "),e(o.a,{staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(e){return t.handleUpdateStockPrice()}}},[e(d.a,{attrs:{dark:""}},[t._v("\n            mdi-update\n          ")])],1)]},proxy:!0},{key:"end",fn:function(){return[e("span",{staticClass:"p-input-icon-right"},[e("InputText",{attrs:{type:"text"},on:{change:t.onFilter},model:{value:t.filters.global.value,callback:function(e){t.$set(t.filters.global,"value",e)},expression:"filters['global'].value"}}),t._v(" "),e("i",{staticClass:"pi pi-search"})],1)]},proxy:!0}])})],1),t._v(" "),e(n.a,{staticClass:"mx-auto",attrs:{eager:""}},[e(c.a),t._v(" "),e("DataTable",{ref:"dt",attrs:{"responsive-layout":"stack",value:t.items,lazy:!0,paginator:!0,rows:t.rows,loading:t.loading,"data-key":"id","total-records":t.totalRecords,"row-hover":!0,"global-filter-fields":["productTitle"],filters:t.filters,selection:t.selectedCustomers,"select-all":t.selectAll},on:{"update:filters":function(e){t.filters=e},"update:selection":function(e){t.selectedCustomers=e},page:function(e){return t.onPage(e)},"select-all-change":t.onSelectAllChange,"row-select":t.onRowSelect,"row-unselect":t.onRowUnselect}},[e("Column",{attrs:{"selection-mode":"multiple"}}),t._v(" "),e("Column",{attrs:{field:"productTitle",header:"Ürün"},scopedSlots:t._u([{key:"body",fn:function(r){return[e("div",{staticClass:"product_container"},[e("div",{staticClass:"product_image"},[e("img",{staticClass:"flag",staticStyle:{width:"100%",height:"100%","object-fit":"contain"},attrs:{src:r.data.cover_image.url,alt:r.data.cover_image.url}})]),t._v(" "),e("div",[e("span",[t._v(" "+t._s(r.data.productTitle))])])])]}}])}),t._v(" "),e("Column",{staticStyle:{width:"20%"},attrs:{field:"productCode",header:"Stok Kodu"}}),t._v(" "),e("Column",{attrs:{field:"stock",header:"STOK"},scopedSlots:t._u([{key:"body",fn:function(r){return[e("span",[t._v(" "+t._s(r.data.stock))])]}}])}),t._v(" "),e("Column",{attrs:{field:"desi",header:"Desi"},scopedSlots:t._u([{key:"body",fn:function(r){return[e("span",[t._v(" "+t._s(r.data.desi))])]}}])}),t._v(" "),e("Column",{staticStyle:{width:"20%"},attrs:{field:"price",header:"Fiyat"},scopedSlots:t._u([{key:"body",fn:function(r){return[e("span",[t._v(" "+t._s(t.formatCurrency(1*r.data.price)))])]}}])}),t._v(" "),e("Column",{staticStyle:{width:"20%"},attrs:{field:"price",header:"Maliyet"},scopedSlots:t._u([{key:"body",fn:function(r){return[e("span",[t._v(" "+t._s(t.formatCurrency(1.1*r.data.price*1.2+30)))])]}}])}),t._v(" "),e("Column",{staticStyle:{width:"20%"},attrs:{field:"profit_rate",header:"Kar Marjı"},scopedSlots:t._u([{key:"body",fn:function(r){return[e("span",[t._v(" "+t._s(r.data.profit_rate))])]}}])}),t._v(" "),e("Column",{staticStyle:{width:"20%"},attrs:{field:"price",header:"Kar"},scopedSlots:t._u([{key:"body",fn:function(r){return[e(l.a,{staticStyle:{"border-radius":"8px","font-size":"14px",height:"30px",color:"white"},attrs:{color:"green"}},[t._v("\n            "+t._s(t.formatCurrency((1.1*r.data.price*1.2+30)*r.data.profit_rate-(1.1*r.data.price*1.2+30)))+"\n          ")])]}}])}),t._v(" "),e("Column",{staticStyle:{width:"20%"},attrs:{field:"price",header:"Karlı Fiyat"},scopedSlots:t._u([{key:"body",fn:function(r){return[e("span",[t._v(" "+t._s(t.formatCurrency((1.1*r.data.price*1.2+30)*r.data.profit_rate)))])]}}])}),t._v(" "),e("Column",{attrs:{exportable:!1,header:"Pazaryerleri",styles:{"min-width":"8rem"}},scopedSlots:t._u([{key:"body",fn:function(r){return[e("GrayScaleImage",{attrs:{"ismarket-product-matched":null!=r.data.n11_product,"colored-image":"n11_color_logo.png","gray-scaled-image":"n11_gray_logo.png",width:"40"},on:{"handle-logo-click":function(e){return t.clickedLogo(r.data,"n11")}}}),t._v(" "),e("GrayScaleImage",{attrs:{"ismarket-product-matched":null!=r.data.hb_product,"colored-image":"hb_colored.png","gray-scaled-image":"hb_gray.png",width:"30"},on:{"handle-logo-click":function(e){return t.clickedLogo(r.data,"hb")}}}),t._v(" "),e("GrayScaleImage",{attrs:{"ismarket-product-matched":null!=r.data.pazarama_product,"colored-image":"pazarama_colored.png","gray-scaled-image":"pazarama_grayed.png",width:"30"},on:{"handle-logo-click":function(e){return t.clickedLogo(r.data,"pazarama")}}})]}}])}),t._v(" "),e("Column",{attrs:{header:"Islemler",styles:{"min-width":"5rem"}},scopedSlots:t._u([{key:"body",fn:function(r){return[e(d.a,{attrs:{small:""},on:{click:function(e){return t.clickEditProduct(r.data)}}},[t._v("\n            mdi-pencil\n          ")])]}}])})],1),t._v(" "),e("Dialog",{attrs:{header:t.ModalHeader,visible:t.displayMaximizable,"container-style":{width:"50vw"},maximizable:!0,modal:!0},on:{"update:visible":function(e){t.displayMaximizable=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("Button",{staticClass:"p-button-text",attrs:{label:"Vazgeç",icon:"pi pi-times"},on:{click:t.closeMaximizable}}),t._v(" "),e("Button",{attrs:{label:"Eşleştir",icon:"pi pi-check",autofocus:"",disabled:t.eslestir_btn_disabled},on:{click:function(e){return t.handleMatch(t.n11_product,t.clickedProduct)}}})]},proxy:!0}])},[t.displayMaximizable?e(f.a,{attrs:{"three-line":""}},[[e(h.a,[t.displayMaximizable?e("div",{staticClass:"product_image"},[e("img",{staticClass:"flag",staticStyle:{width:"100%",height:"100%","object-fit":"contain"},attrs:{src:t.clickedProduct.cover_image.url}})]):t._e(),t._v(" "),e(m.a,[e(m.c,[t._v(t._s(t.clickedProduct.productTitle))]),t._v(" "),e(m.b,[t._v(t._s(t.clickedProduct.productCode)+" - "+t._s(t.clickedProduct.category.name)+" ")])],1)],1)]],2):t._e(),t._v(" "),e(c.a),t._v(" "),e("div",{staticClass:"p-fluid formgrid grid pl-0 pr-0"},[t.displayMaximizable?e("div",{staticClass:"field col-12 pl-0 pr-0 mr-0"},[e("span",{staticClass:"p-input-icon-left"},[e("i",{staticClass:"pi pi-search"}),t._v(" "),e("InputText",{attrs:{type:"text",placeholder:"Search"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogo(t.productCode,t.site)}},model:{value:t.productCode,callback:function(e){t.productCode=e},expression:"productCode"}})],1)]):t._e()]),t._v(" "),e(c.a),t._v(" "),e(n.a,{attrs:{loading:t.loading_single_product_card}},[e(f.a,{attrs:{"three-line":""}},[t.soapresult?[e(h.a,[e("div",{staticClass:"product_image"},[e("img",{staticClass:"flag",staticStyle:{width:"100%",height:"100%","object-fit":"contain"},attrs:{src:t.n11_product.images.image.url}})]),t._v(" "),e(m.a,[e(m.c,[t._v(" "+t._s(t.n11_product.title))]),t._v(" "),e(m.b,[t._v(" "+t._s(t.n11_product.productSellerCode)+" - "+t._s(t.n11_product.category.fullName)+" ")])],1)],1)]:t.try_again?[e(h.a,[e(m.a,[e(m.c,[t._v(t._s(t.errorMessagge))])],1),t._v(" "),e("Button",{staticClass:"p-button-text",attrs:{label:"Yeniden Dene",icon:"pi pi-times"},on:{click:function(e){return t.handleLogo(t.productCode,t.site)}}})],1)]:[e(h.a,[e(m.a,[e(m.c,[t._v("N11 ' den ürün çekiliyor")]),t._v(" "),e(m.b,[t._v("Lütfen bu işlem sırasında sabırlı olunuz")])],1)],1)]],2)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ProductForm:r(969).default,ProgressBarComp:r(942).default,GrayScaleImage:r(943).default})}}]);